############################# Kibana ######################################
#
# https://www.elastic.co/guide/en/kibana/6.4/settings.html
# https://github.com/elastic/kibana/blob/6.4/config/kibana.yml
#
server:

{% if 'port' in kibana_combined.server %}
  # Kibana is served by a back end server. This setting specifies the port to use.
  port: {{ kibana_combined.server.port }}
{% endif %}

{% if 'host' in kibana_combined.server %}
  # Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.
  # The default is 'localhost', which usually means remote machines will not be able to connect.
  # To allow connections from remote users, set this parameter to a non-loopback address.
  host: "{{ kibana_combined.server.host }}"
{% endif %}

{% if 'basePath' in kibana_combined.server %}
  # Enables you to specify a path to mount Kibana at if you are running behind a proxy. This only affects
  # the URLs generated by Kibana, your proxy is expected to remove the basePath value before forwarding requests
  # to Kibana. This setting cannot end in a slash.
  basePath: "{{ kibana_combined.server.basePath }}"
{% endif %}

{% if 'maxPayloadBytes' in kibana_combined.server %}
  # The maximum payload size in bytes for incoming server requests.
  maxPayloadBytes: {{ kibana_combined.server.maxPayloadBytes }}
{% endif %}

{% if 'name' in kibana_combined.server %}
  # The Kibana server's name.  This is used for display purposes.
  name: "{{ kibana_combined.server.name }}"
{% endif %}

{% if 'ssl' in kibana_combined.server %}
# Enables SSL and paths to the PEM-format SSL certificate and SSL key files, respectively.
# These settings enable SSL for outgoing requests from the Kibana server to the browser.
#server.ssl.enabled: false
#server.ssl.certificate: /path/to/your/server.crt
#server.ssl.key: /path/to/your/server.key
{% endif %}



kibana:

{% if 'index' in kibana_combined.kibana %}
  # Kibana uses an index in Elasticsearch to store saved searches, visualizations and
  # dashboards. Kibana creates a new index if the index doesn't already exist.
  index: "{{ kibana_combined.kibana.index }}"
{% endif %}

{% if 'defaultAppId' in kibana_combined.kibana %}
  # The default application to load.
  defaultAppId: "{{ kibana_combined.kibana.defaultAppId }}"
{% endif %}



elasticsearch:

{% if 'url' in kibana_combined.elasticsearch %}
  # The URL of the Elasticsearch instance to use for all your queries.
  url: "{{ kibana_combined.elasticsearch.url }}"
{% endif %}

{% if 'preserveHost' in kibana_combined.elasticsearch %}
  # When this setting's value is true Kibana uses the hostname specified in the server.host
  # setting. When the value of this setting is false, Kibana uses the hostname of the host
  # that connects to this Kibana instance.
  preserveHost: "{{ kibana_combined.elasticsearch.preserveHost }}"
{% endif %}

{% if 'username' in kibana_combined.elasticsearch %}
  # If your Elasticsearch is protected with basic authentication, these settings provide
  # the username and password that the Kibana server uses to perform maintenance on the Kibana
  # index at startup. Your Kibana users still need to authenticate with Elasticsearch, which
  # is proxied through the Kibana server.
  username: "{{ kibana_combined.elasticsearch.username }}"
  password: "{{ kibana_combined.elasticsearch.password }}"
{% endif %}

{% if 'ssl' in kibana_combined.elasticsearch %}
  #ssl:

    # Optional settings that provide the paths to the PEM-format SSL certificate and key files.
    # These files validate that your Elasticsearch backend uses the same key files.
    #certificate: /path/to/your/client.crt
    #key: /path/to/your/client.key

    # Optional setting that enables you to specify a path to the PEM file for the certificate
    # authority for your Elasticsearch instance.
    #certificateAuthorities: [ "/path/to/your/CA.pem" ]

    # To disregard the validity of SSL certificates, change this setting's value to 'none'.
    #verificationMode: full
{% endif %}

{% if 'pingTimeout' in kibana_combined.elasticsearch %}
  # Time in milliseconds to wait for Elasticsearch to respond to pings. Defaults to the value of
  # the elasticsearch.requestTimeout setting.
  pingTimeout: {{ kibana_combined.elasticsearch.pingTimeout }}
{% endif %}

{% if 'requestTimeout' in kibana_combined.elasticsearch %}
  # Time in milliseconds to wait for responses from the back end or Elasticsearch. This value
  # must be a positive integer.
  requestTimeout: {{ kibana_combined.elasticsearch.requestTimeout }}
{% endif %}

{% if 'requestHeadersWhitelist' in kibana_combined.elasticsearch %}
  # List of Kibana client-side headers to send to Elasticsearch. To send *no* client-side
  # headers, set this value to [] (an empty list).
  requestHeadersWhitelist: {{ kibana_combined.elasticsearch.requestHeadersWhitelist }}
{% endif %}

{% if 'customHeaders' in kibana_combined.elasticsearch %}
  # Header names and values that are sent to Elasticsearch. Any custom headers cannot be overwritten
  # by client-side headers, regardless of the elasticsearch.requestHeadersWhitelist configuration.
  customHeaders: {{ kibana_combined.elasticsearch.customHeaders }}
{% endif %}

{% if 'shardTimeout' in kibana_combined.elasticsearch %}
  # Time in milliseconds for Elasticsearch to wait for responses from shards. Set to 0 to disable.
  shardTimeout: {{ kibana_combined.elasticsearch.shardTimeout }}
{% endif %}

{% if 'startupTimeout' in kibana_combined.elasticsearch %}
  # Time in milliseconds to wait for Elasticsearch at Kibana startup before retrying.
  startupTimeout: {{ kibana_combined.elasticsearch.startupTimeout }}
{% endif %}



{% if 'pid' in kibana_combined %}
# Specifies the path where Kibana creates the process ID file.
pid.file: "{{ kibana_combined.pid.file }}"
{% endif %}


{% if 'interval' in kibana_combined.ops %}
# Set the interval in milliseconds to sample system and process performance
# metrics. Minimum is 100ms. Defaults to 5000.
ops.interval: {{ kibana_combined.ops.interval }}
{% endif %}


{% if 'defaultLocale' in kibana_combined.i18n %}
# The default locale. This locale can be used in certain circumstances to substitute any missing
# translations.
i18n.defaultLocale: "{{ kibana_combined.i18n.defaultLocale }}"
{% endif %}



{% if 'logging' in kibana_combined %}
logging:

{% if 'dest' in kibana_combined.logging %}
  # Enables you specify a file where Kibana stores log output.
  dest: "{{ kibana_combined.logging.dest }}"
{% endif %}

{% if 'silent' in kibana_combined.logging %}
  # Set the value of this setting to true to suppress all logging output.
  silent: "{{ kibana_combined.logging.silent }}"
{% endif %}

{% if 'quiet' in kibana_combined.logging %}
  # Set the value of this setting to true to suppress all logging output other than error messages.
  quiet: "{{ kibana_combined.logging.quiet }}"
{% endif %}

{% if 'verbose' in kibana_combined.logging %}
  # Set the value of this setting to true to log all events, including system usage information
  # and all requests.
  verbose: "{{ kibana_combined.logging.verbose }}"
{% endif %}
{% endif %}
